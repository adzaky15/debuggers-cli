- name: app.js
  description: This is the entry file for the application, mostly just setup and boilerplate code.
  path: js/app.js
  size: [unknown]
  content:
    - imports:
        - name: serviceworker.js
          path: ../serviceworker.js
        - name: serviceworker-cache-polyfill.js
          path: ../serviceworker-cache-polyfill.js
        - name: manifest.json
          path: ../manifest.json
        - name: .htaccess
          path: ../.htaccess
        - name: favicon.ico
          path: ../favicon.ico
        - name: favicon.png
          path: ../favicon.png
      description: Load the ServiceWorker, the Cache polyfill, the manifest.json file and the .htaccess file.
    - checks:
        - condition: 'serviceWorker' in navigator
          actions:
            - name: Install ServiceWorker
              path: navigator.serviceWorker.register('/serviceworker.js')
              success_message: 'ServiceWorker registration successful'
              failure_message: 'ServiceWorker registration failed'
          fallback_message: 'ServiceWorker is not supported in this browser.'
      description: Check for ServiceWorker support before trying to install it.
    - imports:
        - name: react
          package: React
          version: [unknown]
        - name: redux
          package: redux
          version: [unknown]
        - name: redux-thunk
          package: redux-thunk
          version: [unknown]
        - name: react-dom
          package: ReactDom
          version: [unknown]
        - name: react-redux
          package: react-redux
          version: [unknown]
        - name: react-router
          package: react-router
          version: [unknown]
        - name: fontfaceobserver
          package: fontfaceobserver
          version: [unknown]
      description: Import all the third party stuff.
    - checks:
        - condition: Open Sans is loaded
          action: add js-open-sans-loaded class to the body
        - fallback_action: remove js-open-sans-loaded class from the body.
      description: When Open Sans is loaded, add the js-open-sans-loaded class to the body which swaps out the fonts.
    - imports:
        - name: HomePage
          path: ./components/pages/HomePage.react
        - name: LoginPage
          path: ./components/pages/LoginPage.react
        - name: RegisterPage
          path: ./components/pages/RegisterPage.react
        - name: Dashboard
          path: ./components/pages/Dashboard.react
        - name: NotFound
          path: ./components/pages/NotFound.react
        - name: App
          path: ./components/App.react
      description: Import the components used as pages
    - imports:
        - name: main.css
          path: ../css/main.css
      description: Import the CSS file, which webpack transfers to the build folder.
    - createStore:
        - reducer: homeReducer
        - middleware: redux-thunk
        - store: store
      description: Creates the Redux reducer with the redux-thunk middleware, which allows us to do asynchronous things in the actions.
    - function: checkAuth
      description: Check if the user is authenticated.
    - render:
        - component: Router
        - history: browserHistory
        - routes:
            - component: App
            - path: '/'
            - component: HomePage
            - onEnter: checkAuth
            - path: '/login'
            - component: LoginPage
            - onEnter: checkAuth
            - path: '/register'
            - component: RegisterPage
            - onEnter: checkAuth
            - path: '/dashboard'
            - component: Dashboard
            - path: '*'
            - component: NotFound
          description: Render the application.